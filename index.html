<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kingdom Come: Deliverance II Dice Calculator | Farkle Strategy Engine</title>
    
    <!-- SEO & SOCIAL METADATA -->
    <meta name="description" content="The definitive Kingdom Come: Deliverance II Dice Calculator. Calculate exact probabilities and expected values for the Farkle (Zuber) mini-game. Optimize your dice loadout with deterministic math.">
    <meta name="keywords" content="Kingdom Come Deliverance 2 Dice Calculator, KCD2 Farkle Guide, KCD2 Zuber Strategy, Best Dice KCD2, Farkle Probability, KCD2 Gambling Tool">
    <meta property="og:title" content="Kingdom Come: Deliverance II Dice Calculator">
    <meta property="og:description" content="Deterministic Farkle analysis for the taverns of Bohemia.">
    <meta property="og:type" content="website">
    
    <!-- FONTS & STYLES -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=IM+Fell+English+SC&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- CORE SCRIPTS -->
    <script src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/prop-types@15.8.1/prop-types.min.js"></script>
    <script src="https://unpkg.com/recharts@2.12.7/umd/Recharts.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        body { background-color: #080706; margin: 0; }
        .medieval-font { font-family: 'Cinzel', serif; }
        .serif-body { font-family: 'Libre Baskerville', serif; }
        .manuscript-text { font-family: 'IM Fell English SC', serif; }

        .manuscript-border {
            border-image: linear-gradient(to bottom, #f3e5ab, #5a4633, #f3e5ab) 1;
            border-width: 2px;
            border-style: solid;
        }

        .parchment {
            background: linear-gradient(135deg, #24201b 0%, #0d0b0a 100%);
            box-shadow: inset 0 0 100px rgba(0,0,0,0.95);
        }

        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #080706; }
        ::-webkit-scrollbar-thumb { background: #5a4633; }
        
        @keyframes medieval-spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .animate-medieval-spin { animation: medieval-spin 3s linear infinite; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo, useEffect } = React;
        const { BarChart, Bar, XAxis, YAxis, Tooltip, ResponsiveContainer, Cell, CartesianGrid } = Recharts;

        const Icon = ({ children, className = "w-6 h-6", ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>{children}</svg>
        );
        const SearchIcon = (p) => <Icon {...p}><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></Icon>;
        const ShieldAlertIcon = (p) => <Icon {...p}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/><path d="M12 8v4"/><path d="M12 16h.01"/></Icon>;
        const FlameIcon = (p) => <Icon {...p}><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></Icon>;
        const BookOpenIcon = (p) => <Icon {...p}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></Icon>;
        const PlusIcon = (p) => <Icon {...p}><path d="M5 12h14"/><path d="M12 5v14"/></Icon>;
        const TrashIcon = (p) => <Icon {...p}><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></Icon>;
        const ZapIcon = (p) => <Icon {...p}><path d="M13 2 3 14h9l-1 8 10-12h-9l1-8z"/></Icon>;
        const LoaderIcon = (p) => <Icon {...p} className={`${p.className} animate-spin`}><path d="M12 2v4"/><path d="m16.2 7.8 2.9-2.9"/><path d="M18 12h4"/><path d="m16.2 16.2 2.9 2.9"/><path d="M12 18v4"/><path d="m4.9 19.1 2.9-2.9"/><path d="M2 12h4"/><path d="m4.9 4.9 2.9 2.9"/></Icon>;
        const TargetIcon = (p) => <Icon {...p}><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="6"/><circle cx="12" cy="12" r="2"/></Icon>;
        const CoinsIcon = (p) => <Icon {...p}><circle cx="8" cy="8" r="6"/><path d="M18.09 10.37A6 6 0 1 1 10.34 18"/><path d="M7 6h1v4"/><path d="m16.71 13.88.7.71-2.82 2.82"/></Icon>;

        const DICE_DATA = {
            "Shrinking die": [0.222, 0.111, 0.111, 0.111, 0.111, 0.333],
            "Ci die": [0.143, 0.143, 0.143, 0.143, 0.143, 0.286],
            "Fer die": [0.143, 0.143, 0.143, 0.143, 0.143, 0.286],
            "Lu die": [0.143, 0.143, 0.143, 0.143, 0.143, 0.286],
            "Lucky Die": [0.273, 0.045, 0.091, 0.136, 0.182, 0.273],
            "Even die": [0.067, 0.267, 0.067, 0.267, 0.067, 0.267],
            "Mother-of-pearl die": [0.250, 0.083, 0.083, 0.083, 0.250, 0.250],
            "Greasy die": [0.176, 0.118, 0.176, 0.118, 0.176, 0.235],
            "Favourable die": [0.333, 0.000, 0.056, 0.056, 0.333, 0.222],
            "Heavenly Kingdom die": [0.368, 0.105, 0.105, 0.105, 0.105, 0.211],
            "Painted die": [0.200, 0.067, 0.067, 0.067, 0.400, 0.200],
            "Saint Antiochus' die": [0.200, 0.067, 0.400, 0.067, 0.067, 0.200],
            "Strip die": [0.250, 0.125, 0.125, 0.125, 0.188, 0.188],
            "Devil's head die": [0.167, 0.167, 0.167, 0.167, 0.167, 0.167], 
            "Hugo's Die": [0.167, 0.167, 0.167, 0.167, 0.167, 0.167],
            "Molar die": [0.167, 0.167, 0.167, 0.167, 0.167, 0.167],
            "Regular Die": [0.167, 0.167, 0.167, 0.167, 0.167, 0.167],
            "Premolar die": [0.167, 0.167, 0.167, 0.167, 0.167, 0.167],
            "St. Stephen's die": [0.167, 0.167, 0.167, 0.167, 0.167, 0.167],
            "Wisdom tooth die": [0.167, 0.167, 0.167, 0.167, 0.167, 0.167],
            "Lousy gambler's die": [0.100, 0.150, 0.100, 0.150, 0.350, 0.150],
            "Cautious cheater's die": [0.238, 0.143, 0.095, 0.143, 0.238, 0.143],
            "Sad Greaser's Die": [0.261, 0.261, 0.043, 0.043, 0.261, 0.130],
            "Wagoner's Die": [0.056, 0.278, 0.333, 0.111, 0.111, 0.111],
            "King's die": [0.125, 0.188, 0.219, 0.250, 0.125, 0.094],
            "Painter's die B": [0.091, 0.273, 0.182, 0.182, 0.182, 0.091],
            "Painter's die G": [0.091, 0.273, 0.182, 0.182, 0.182, 0.091],
            "Painter's die R": [0.091, 0.273, 0.182, 0.182, 0.182, 0.091],
            "Three die": [0.182, 0.091, 0.364, 0.091, 0.182, 0.091],
            "Unlucky die": [0.091, 0.273, 0.182, 0.182, 0.182, 0.091],
            "Unbalanced Die": [0.250, 0.333, 0.083, 0.083, 0.167, 0.083],
            "Grozav's lucky die": [0.067, 0.667, 0.067, 0.067, 0.067, 0.067],
            "Odd die": [0.267, 0.067, 0.267, 0.067, 0.267, 0.067],
            "Weighted die": [0.667, 0.067, 0.067, 0.067, 0.067, 0.067],
            "Grimy die": [0.063, 0.313, 0.063, 0.063, 0.438, 0.063],
            "Holy Trinity die": [0.211, 0.263, 0.368, 0.053, 0.053, 0.053],
            "Aranka's die": [0.286, 0.048, 0.286, 0.048, 0.286, 0.048],
            "Die of misfortune": [0.045, 0.227, 0.227, 0.227, 0.227, 0.045],
            "Mathematician's Die": [0.167, 0.208, 0.250, 0.292, 0.042, 0.042],
            "Pie die": [0.462, 0.077, 0.231, 0.231, 0.000, 0.000]
        };

        const DICE_NAMES = Object.keys(DICE_DATA).sort();

        const calculateRawScore = (counts) => {
            let score = 0; let diceUsed = 0; let remaining = [...counts];
            if (remaining.slice(1).every(c => c >= 1)) return { score: 1500, diceUsed: 6 };
            if (remaining.slice(2, 7).every(c => c >= 1)) {
                score += 750; diceUsed += 5; for(let i=2; i<=6; i++) remaining[i]--;
            } else if (remaining.slice(1, 6).every(c => c >= 1)) {
                score += 500; diceUsed += 5; for(let i=1; i<=5; i++) remaining[i]--;
            }
            for (let f = 1; f <= 6; f++) {
                if (remaining[f] >= 3) {
                    const base = (f === 1) ? 1000 : f * 100;
                    const mult = Math.pow(2, remaining[f] - 3);
                    score += base * mult; diceUsed += remaining[f]; remaining[f] = 0;
                }
            }
            score += remaining[1] * 100; diceUsed += remaining[1];
            score += remaining[5] * 50; diceUsed += remaining[5];
            return { score, diceUsed };
        };

        const calculateOptimalScore = (counts, jokerCount) => {
            if (jokerCount === 0) return calculateRawScore(counts);
            let neededFor16 = 0; for(let i=1; i<=6; i++) if(counts[i] === 0) neededFor16++;
            if (jokerCount >= neededFor16) return { score: 1500, diceUsed: 6 };
            let neededFor26 = 0; for(let i=2; i<=6; i++) if(counts[i] === 0) neededFor26++;
            if (jokerCount >= neededFor26) return { score: 750, diceUsed: 5 + Math.min(jokerCount - neededFor26, 1) };
            let neededFor15 = 0; for(let i=1; i<=5; i++) if(counts[i] === 0) neededFor15++;
            if (jokerCount >= neededFor15) return { score: 500, diceUsed: 5 + Math.min(jokerCount - neededFor15, 1) };
            let best = { score: 0, diceUsed: 0 };
            const solve = (j, current) => {
                if (j === 0) {
                    const res = calculateRawScore(current);
                    if (res.score > best.score || (res.score === best.score && res.diceUsed > best.diceUsed)) best = res;
                    return;
                }
                for (let f of [1, 6, 5, 4, 3, 2]) {
                    current[f]++; solve(j - 1, current); current[f]--;
                    if (jokerCount > 2 && f === 1) break; 
                }
            };
            solve(jokerCount, [...counts]); return best;
        };

        const App = () => {
            const [inventory, setInventory] = useState(["Devil's head die", "Shrinking die", "Ci die", "Even die", "Mother-of-pearl die", "Regular Die"]);
            const [selectedLoadout, setSelectedLoadout] = useState(Array(6).fill("Regular Die"));
            const [activeTab, setActiveTab] = useState('ledger');
            const [loading, setLoading] = useState(false);
            const [searchTerm, setSearchTerm] = useState("");
            const [analysis, setAnalysis] = useState({ chartData: [], totalEV: 0, bustProb: 0, hotProb: 0 });

            useEffect(() => {
                const fillerCount = Math.max(0, 6 - inventory.length);
                const initialLoadout = [...inventory.slice(0, 6), ...Array(fillerCount).fill("Regular Die")];
                setSelectedLoadout(initialLoadout);
            }, [inventory]);

            const filteredArchive = useMemo(() => DICE_NAMES.filter(n => n.toLowerCase().includes(searchTerm.toLowerCase())), [searchTerm]);

            useEffect(() => {
                setLoading(true);
                const timer = setTimeout(() => {
                    const scoreFreq = {}; let totalEV = 0; let bustProb = 0; let hotProb = 0;
                    const generate = (idx, counts, jokers, p) => {
                        if (idx === 6) {
                            const { score, diceUsed } = calculateOptimalScore(counts, jokers);
                            if (score === 0) bustProb += p;
                            if (diceUsed === 6) hotProb += p;
                            scoreFreq[score] = (scoreFreq[score] || 0) + p;
                            totalEV += score * p; return;
                        }
                        const dieName = selectedLoadout[idx];
                        const probs = DICE_DATA[dieName] || DICE_DATA["Regular Die"];
                        const isDevil = dieName === "Devil's head die";
                        for (let face = 1; face <= 6; face++) {
                            const faceProb = probs[face - 1];
                            if (faceProb > 0) {
                                if (isDevil && face === 1) generate(idx + 1, counts, jokers + 1, p * faceProb);
                                else { counts[face]++; generate(idx + 1, counts, jokers, p * faceProb); counts[face]--; }
                            }
                        }
                    };
                    generate(0, Array(7).fill(0), 0, 1.0);
                    const chartData = Object.entries(scoreFreq).map(([s, p]) => ({ score: parseInt(s), probability: p * 100 })).sort((a, b) => a.score - b.score);
                    setAnalysis({ chartData, totalEV, bustProb: bustProb * 100, hotProb: hotProb * 100 });
                    setLoading(false);
                }, 50);
                return () => clearTimeout(timer);
            }, [selectedLoadout]);

            const optimization = useMemo(() => {
                const scoredDice = inventory.map(name => {
                    let val = 0; const data = DICE_DATA[name] || DICE_DATA["Regular Die"];
                    data.forEach((p, i) => {
                        const f = i + 1;
                        if (name === "Devil's head die" && f === 1) val += p * 400;
                        else if (f === 1) val += p * 100;
                        else if (f === 5) val += p * 50;
                        else val += p * 15;
                    });
                    return { name, val };
                }).sort((a, b) => b.val - a.val);
                const top6 = scoredDice.slice(0, 6).map(d => d.name);
                while (top6.length < 6) top6.push("Regular Die");
                return top6;
            }, [inventory]);

            return (
                <div className="min-h-screen text-[#f5efda] p-4 md:p-10 font-serif selection:bg-[#5a4633] selection:text-white">
                    <div className="max-w-7xl mx-auto space-y-12">
                        <header className="flex flex-col md:flex-row justify-between items-end gap-6 border-b border-[#5a4633] pb-10">
                            <div>
                                <div className="flex items-center gap-4 mb-3">
                                    <h1 className="text-6xl font-black uppercase tracking-tighter medieval-font text-[#fdf6e3]">Kingdom Come: Deliverance II Dice Calculator</h1>
                                </div>
                                <p className="text-[#c5b18a] manuscript-text text-2xl tracking-[0.2em]">Farkle mini-game optimal dice calculator</p>
                            </div>
                            <div className="flex bg-[#12100e] p-2 border border-[#5a4633] rounded-sm shadow-2xl">
                                {['ledger', 'archive'].map(t => (
                                    <button 
                                        key={t} onClick={() => setActiveTab(t)}
                                        className={`px-10 py-3 text-sm font-bold uppercase medieval-font transition-all ${activeTab === t ? 'bg-[#f3e5ab] text-[#0a0908] shadow-[0_0_25px_rgba(243,229,171,0.3)] scale-105 z-10' : 'text-[#8b7355] hover:text-[#f5efda]'}`}
                                    >
                                        {t === 'ledger' ? 'Current Hand' : 'The Treasury'}
                                    </button>
                                ))}
                            </div>
                        </header>

                        {activeTab === 'ledger' ? (
                            <div className="grid grid-cols-1 lg:grid-cols-12 gap-12">
                                <div className="lg:col-span-4 space-y-10">
                                    <div className="parchment manuscript-border p-8 relative bg-[#1c1815]">
                                        <div className="absolute -top-4 -left-4 w-10 h-10 bg-[#f3e5ab] rotate-45 border-4 border-[#080706] shadow-xl" />
                                        <div className="flex items-center justify-between mb-10 border-b border-[#5a4633] pb-6">
                                            <h2 className="text-sm font-bold uppercase tracking-[0.3em] medieval-font text-[#f3e5ab]">Loadout Selection</h2>
                                            <button onClick={() => setSelectedLoadout(optimization)} className="text-[11px] text-[#0a0908] bg-[#f3e5ab] px-4 py-1.5 hover:bg-[#fff9e6] font-bold medieval-font uppercase">
                                                <ZapIcon className="w-3.5 h-3.5 inline mr-1.5" /> Optimize
                                            </button>
                                        </div>
                                        <div className="space-y-5">
                                            {selectedLoadout.map((name, i) => (
                                                <div key={i} className="relative group">
                                                    <select 
                                                        value={name} 
                                                        onChange={(e) => {
                                                            const next = [...selectedLoadout]; next[i] = e.target.value; setSelectedLoadout(next);
                                                        }}
                                                        className="w-full bg-[#0a0908] border border-[#5a4633] text-[#f5efda] py-4 px-6 text-sm serif-body appearance-none focus:border-[#f3e5ab] transition-all outline-none"
                                                    >
                                                        <option value="Regular Die">Regular Die (Filler)</option>
                                                        {Array.from(new Set(inventory)).filter(n => n !== "Regular Die").map(n => (
                                                            <option key={n} value={n}>{n}</option>
                                                        ))}
                                                    </select>
                                                    <BookOpenIcon className="absolute right-5 top-1/2 -translate-y-1/2 w-4 h-4 text-[#5a4633] pointer-events-none group-hover:text-[#f3e5ab]" />
                                                </div>
                                            ))}
                                        </div>
                                    </div>

                                    <div className="space-y-6">
                                        <div className="bg-[#1e1b18] border-l-4 border-[#f3e5ab] p-10 shadow-2xl relative overflow-hidden group">
                                            <div className="absolute top-0 right-0 w-40 h-40 bg-[#f3e5ab]/5 -mr-20 -mt-20 rounded-full blur-3xl" />
                                            <p className="text-[11px] font-black uppercase tracking-[0.2em] text-[#c5b18a] mb-3 medieval-font">Expected Offering</p>
                                            <p className="text-7xl font-black text-[#fdf6e3] medieval-font group-hover:scale-105 transition-transform origin-left drop-shadow-sm">
                                                {analysis.totalEV.toFixed(0)} <span className="text-xl text-[#8b7355] font-normal italic lowercase serif-body">score</span>
                                            </p>
                                        </div>
                                        <div className="grid grid-cols-2 gap-6">
                                            <div className="bg-[#12100e] border border-[#5a4633] p-8 text-center transition-all hover:bg-[#1a1714]">
                                                <ShieldAlertIcon className="w-7 h-7 mx-auto text-[#b22222] mb-3" />
                                                <p className="text-[11px] font-bold text-[#c5b18a] uppercase mb-1 medieval-font">Bust Risk</p>
                                                <p className="text-3xl font-bold text-[#f5efda] serif-body">{analysis.bustProb.toFixed(1)}%</p>
                                            </div>
                                            <div className="bg-[#12100e] border border-[#5a4633] p-8 text-center transition-all hover:bg-[#1a1714]">
                                                <FlameIcon className="w-7 h-7 mx-auto text-[#f3e5ab] mb-3 animate-pulse" />
                                                <p className="text-[11px] font-bold text-[#c5b18a] uppercase mb-1 medieval-font">Hot Dice</p>
                                                <p className="text-3xl font-bold text-[#fdf6e3] serif-body">{analysis.hotProb.toFixed(1)}%</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div className="lg:col-span-8 bg-[#0a0908] manuscript-border p-12 flex flex-col relative shadow-2xl">
                                    <div className="flex justify-between items-start mb-14 border-b border-[#5a4633]/40 pb-8">
                                        <div>
                                            <h3 className="text-4xl font-bold flex items-center gap-5 text-[#fdf6e3] medieval-font tracking-tight mb-2">
                                                <TargetIcon className={`w-11 h-11 ${loading ? 'animate-medieval-spin' : 'text-[#f3e5ab]'}`} />
                                                Manuscript of Fate
                                            </h3>
                                            <p className="text-md text-[#c5b18a] serif-body italic opacity-80">Deterministic outcome analysis across all 46,656 permutations.</p>
                                        </div>
                                    </div>

                                    {loading ? (
                                        <div className="flex-1 flex flex-col items-center justify-center text-[#5a4633] gap-8">
                                            <LoaderIcon className="w-24 h-24 text-[#f3e5ab] opacity-50" />
                                            <p className="text-xl uppercase tracking-[0.5em] manuscript-text italic text-[#c5b18a]">Whispering to the tavern spirits...</p>
                                        </div>
                                    ) : (
                                        <div className="flex-1 w-full h-[500px]">
                                            <ResponsiveContainer width="100%" height="100%">
                                                <BarChart data={analysis.chartData}>
                                                    <CartesianGrid strokeDasharray="0" vertical={false} stroke="#1e1b18" />
                                                    <XAxis dataKey="score" stroke="#5a4633" fontSize={11} tickLine={false} axisLine={false} minTickGap={40} className="serif-body" />
                                                    <YAxis stroke="#5a4633" fontSize={11} tickLine={false} axisLine={false} tickFormatter={v => `${v.toFixed(0)}%`} className="serif-body" />
                                                    <Tooltip 
                                                        contentStyle={{ backgroundColor: '#12100e', border: '1px solid #5a4633', borderRadius: '0px', padding: '15px' }} 
                                                        itemStyle={{ color: '#fdf6e3', fontSize: '14px', fontFamily: 'serif' }}
                                                        cursor={{ fill: '#ffffff', fillOpacity: 0.03 }}
                                                        labelStyle={{ color: '#c5b18a', marginBottom: '6px', fontWeight: 'bold', fontSize: '12px' }}
                                                    />
                                                    <Bar dataKey="probability">
                                                        {analysis.chartData.map((entry, idx) => (
                                                            <Cell 
                                                                key={idx} 
                                                                fill={entry.score === 0 ? '#5a0000' : (entry.score >= 1000 ? '#f3e5ab' : '#332d26')} 
                                                                fillOpacity={0.95}
                                                                stroke={entry.score >= 1000 ? '#fdf6e3' : '#5a4633'}
                                                                strokeWidth={0.5}
                                                            />
                                                        ))}
                                                    </Bar>
                                                </BarChart>
                                            </ResponsiveContainer>
                                        </div>
                                    )}
                                    
                                    <div className="mt-10 flex flex-wrap gap-10 text-[12px] font-bold text-[#c5b18a] uppercase tracking-[0.25em] medieval-font border-t border-[#1e1b18] pt-8">
                                        <span className="flex items-center gap-3"><div className="w-4 h-4 bg-[#5a0000] border border-red-900" /> Vile Bust</span>
                                        <span className="flex items-center gap-3"><div className="w-4 h-4 bg-[#332d26] border border-[#5a4633]" /> Common Roll</span>
                                        <span className="flex items-center gap-3"><div className="w-4 h-4 bg-[#f3e5ab] border border-[#fdf6e3]" /> Noble's Fortune</span>
                                    </div>
                                </div>
                            </div>
                        ) : (
                            <div className="grid grid-cols-1 lg:grid-cols-2 gap-16">
                                <div className="parchment manuscript-border p-12 shadow-2xl bg-[#0d0b09]">
                                    <h2 className="text-4xl font-bold uppercase mb-12 medieval-font text-[#fdf6e3] border-b border-[#5a4633] pb-6">Your Satchel</h2>
                                    <div className="space-y-4 max-h-[600px] overflow-y-auto pr-6">
                                        {inventory.map((name, i) => (
                                            <div key={i} className="bg-[#181512] border border-[#5a4633] p-5 flex justify-between items-center hover:border-[#f3e5ab] transition-all group shadow-md">
                                                <div className="flex items-center gap-5">
                                                    <CoinsIcon className="w-5 h-5 text-[#5a4633] group-hover:text-[#f3e5ab]" />
                                                    <span className="font-bold text-xs serif-body tracking-tight text-[#f5efda] uppercase">{name}</span>
                                                </div>
                                                <button onClick={() => setInventory(prev => {const n = [...prev]; n.splice(i, 1); return n;})} className="p-3 text-[#5a4633] hover:text-[#ff4d4d] transition-colors">
                                                    <TrashIcon className="w-5 h-5" />
                                                </button>
                                            </div>
                                        ))}
                                        {inventory.length === 0 && <p className="text-center text-[#5a4633] py-28 italic serif-body text-xl">The satchel is hollow, friend.</p>}
                                    </div>
                                </div>

                                <div className="bg-[#0a0908] manuscript-border p-12 shadow-2xl">
                                    <div className="flex flex-col md:flex-row md:items-center justify-between gap-8 mb-12 border-b border-[#5a4633] pb-8">
                                        <h2 className="text-4xl font-bold uppercase medieval-font text-[#c5b18a]">The Archive</h2>
                                        <div className="relative group w-full md:w-80">
                                            <SearchIcon className="absolute left-5 top-1/2 -translate-y-1/2 w-5 h-5 text-[#5a4633] group-focus-within:text-[#f3e5ab] transition-colors" />
                                            <input 
                                                type="text" 
                                                placeholder="Seek a die..." 
                                                value={searchTerm}
                                                onChange={(e) => setSearchTerm(e.target.value)}
                                                className="bg-[#12100e] border border-[#5a4633] rounded-sm pl-14 pr-8 py-4 text-sm serif-body text-[#f5efda] focus:border-[#f3e5ab] transition-all outline-none w-full shadow-inner"
                                            />
                                        </div>
                                    </div>
                                    <div className="grid grid-cols-1 gap-4 max-h-[550px] overflow-y-auto pr-6">
                                        {filteredArchive.map(name => (
                                            <button 
                                                key={name} onClick={() => setInventory(prev => [...prev, name])} 
                                                className="flex items-center justify-between bg-[#181512]/70 border border-[#5a4633] p-5 hover:bg-[#f3e5ab] hover:text-[#0a0908] transition-all text-left group shadow-sm"
                                            >
                                                <span className="font-bold text-base serif-body tracking-wide">{name}</span>
                                                <PlusIcon className="w-5 h-5 opacity-40 group-hover:opacity-100" />
                                            </button>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        )}
                        <footer className="mt-12 pt-8 border-t border-[#5a4633]/20 text-center space-y-4">
                            <p className="text-[10px] uppercase tracking-widest text-[#8b7355] medieval-font max-w-2xl mx-auto opacity-100 leading-relaxed font-bold">
                                The Kingdom Come: Deliverance II Dice Calculator is a fan-made strategy tool. It is not affiliated with, endorsed by, or associated with Warhorse Studios or Deep Silver. 
                                All game names and dice properties are trademarks of their respective owners.
                            </p>
                        </footer>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
